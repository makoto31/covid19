<html>
    <head>
        <meta charset="utf-8">
        <title>新型コロナウィルス都道府県別の状況</title>
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="keywords" content="">
        <meta name="description" content="新型コロナウィルス 都道府県別 新規感染者数をグラフで確認できます">
        <meta property="og:site_name" content="新型コロナウィルス都道府県別の状況">
        <meta property="og:title" content="新型コロナウィルス都道府県別の状況">
        <meta property="og:description" content="新型コロナウィルス 都道府県別 新規感染者数をグラフで確認できます">
        <meta property="og:type" content="website">
        <meta name="twitter:card" content="summary">

        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
        <style>
            body{
                color: #333;
                font-family: "SF Pro JP", "SF Pro Text", "SF Pro Icons", "Hiragino Kaku Gothic Pro", "ヒラギノ角ゴ Pro W3", メイリオ, Meiryo, "ＭＳ Ｐゴシック", "Helvetica Neue", Helvetica, Arial, sans-serif;
            }
            a{
                color: #333;
            }
            .menu{
                padding: 0 1rem 1rem 1rem;
                max-width: 1000px;
                margin: auto;
            }
            .menu a{
                display: inline-block;
                width: 20%;
                font-size: .75rem;
                line-height: 2em;
                background-color: rgba(250, 250, 250, 1);
                text-align: center;
                box-sizing: border-box;
                border: solid .25rem #fff;
                border-radius: 3px;
                color: #06c;
            }

            .prefectures{
                max-width: 1000px;
                margin: auto;
                display: flex;
                flex-wrap: wrap;
            }
            .prefecture{
                background-color: rgba(250, 250, 250, 1);
                border: solid .5rem #fff;
                border-radius: 3px;
                box-sizing: border-box;
                width: 100%;
                margin-top: -.5rem;
            }

            h2{
                margin: auto;
                text-align: center;
                color: #666;
            }
            @media (min-width: 500px) {
                .prefecture{
                    width: 50%;
                    margin-top: 0;
                }
            }
        </style>
    </head>
    <body style="margin: 0;">
        <div style="background-color: rgba(0,0,0,0.8); padding: 1rem;">
            <h1 style="max-width: 600px; margin: auto; color: white;">新型コロナウィルス都道府県別の状況</h1>
        </div>
        <div style="max-width: 600px; margin: auto; padding: 1.5rem 1rem; line-height: 2em;">
            都道府県別の新規感染者数をビジュアル化しました。
            データは<a href="https://toyokeizai.net/sp/visual/tko/covid19/" target="_blank" rel="noopener noreferrer">東洋経済さん</a>と
            <a href="https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/0000121431_00086.html" target="_blank" rel="noopener noreferrer">厚生労働省</a>が公開されているデータを元に整理しました。

            <time datetime="2020-03-27" itemprop="dateModified">2020年3月27日更新</time>
        </div>

        <script>
            const data = {
	"2020/1/15": {
		"神奈川県": 1,
		"総計": 1
	},
	"2020/1/28": {
		"奈良県": 1,
		"総計": 1
	},
	"2020/1/29": {
		"大阪府": 1,
		"総計": 1
	},
	"2020/1/30": {
		"三重県": 1,
		"京都府": 1,
		"総計": 2
	},
	"2020/1/31": {
		"千葉県": 1,
		"総計": 1
	},
	"2020/2/5": {
		"京都府": 1,
		"総計": 1
	},
	"2020/2/11": {
		"神奈川県": 1,
		"総計": 1
	},
	"2020/2/13": {
		"神奈川県": 1,
		"東京都": 1,
		"和歌山県": 1,
		"千葉県": 1,
		"総計": 4
	},
	"2020/2/14": {
		"和歌山県": 3,
		"沖縄県": 1,
		"東京都": 2,
		"愛知県": 1,
		"北海道": 1,
		"神奈川県": 1,
		"総計": 9
	},
	"2020/2/15": {
		"和歌山県": 1,
		"東京都": 2,
		"愛知県": 1,
		"総計": 4
	},
	"2020/2/16": {
		"愛知県": 1,
		"東京都": 1,
		"総計": 2
	},
	"2020/2/17": {
		"神奈川県": 1,
		"東京都": 1,
		"和歌山県": 3,
		"愛知県": 1,
		"総計": 6
	},
	"2020/2/18": {
		"和歌山県": 2,
		"東京都": 3,
		"愛知県": 1,
		"神奈川県": 2,
		"総計": 8
	},
	"2020/2/19": {
		"神奈川県": 1,
		"北海道": 2,
		"沖縄県": 1,
		"東京都": 3,
		"愛知県": 1,
		"総計": 8
	},
	"2020/2/20": {
		"福岡県": 2,
		"北海道": 1,
		"千葉県": 1,
		"沖縄県": 1,
		"東京都": 1,
		"埼玉県": 1,
		"愛知県": 1,
		"神奈川県": 1,
		"総計": 9
	},
	"2020/2/21": {
		"北海道": 3,
		"石川県": 1,
		"東京都": 3,
		"千葉県": 2,
		"神奈川県": 1,
		"愛知県": 2,
		"熊本県": 1,
		"総計": 13
	},
	"2020/2/22": {
		"熊本県": 2,
		"和歌山県": 1,
		"千葉県": 1,
		"北海道": 10,
		"東京都": 1,
		"愛知県": 4,
		"栃木県": 1,
		"神奈川県": 4,
		"総計": 24
	},
	"2020/2/23": {
		"愛知県": 2,
		"千葉県": 1,
		"北海道": 8,
		"総計": 11
	},
	"2020/2/24": {
		"東京都": 5,
		"石川県": 1,
		"北海道": 4,
		"神奈川県": 1,
		"総計": 11
	},
	"2020/2/25": {
		"長野県": 1,
		"熊本県": 2,
		"北海道": 6,
		"石川県": 1,
		"愛知県": 3,
		"千葉県": 3,
		"総計": 16
	},
	"2020/2/26": {
		"北海道": 1,
		"大阪府": 2,
		"神奈川県": 1,
		"東京都": 3,
		"愛知県": 5,
		"総計": 12
	},
	"2020/2/27": {
		"岐阜県": 1,
		"大阪府": 2,
		"滋賀県": 1,
		"神奈川県": 2,
		"千葉県": 1,
		"北海道": 15,
		"愛知県": 2,
		"総計": 24
	},
	"2020/2/28": {
		"神奈川県": 2,
		"静岡県": 1,
		"北海道": 12,
		"愛知県": 1,
		"大阪市": 1,
		"高知県": 1,
		"総計": 18
	},
	"2020/2/29": {
		"新潟県": 1,
		"宮城県": 1,
		"東京都": 1,
		"北海道": 4,
		"愛知県": 1,
		"総計": 8
	},
	"2020/3/1": {
		"福岡県": 1,
		"神奈川県": 4,
		"千葉県": 1,
		"北海道": 2,
		"東京都": 2,
		"高知県": 1,
		"愛知県": 3,
		"兵庫県": 1,
		"総計": 15
	},
	"2020/3/2": {
		"高知県": 1,
		"新潟県": 1,
		"北海道": 5,
		"大阪府": 2,
		"総計": 9
	},
	"2020/3/3": {
		"大分県": 1,
		"兵庫県": 2,
		"北海道": 2,
		"新潟県": 3,
		"京都府": 1,
		"東京都": 1,
		"大阪府": 2,
		"愛知県": 4,
		"山口県": 1,
		"総計": 17
	},
	"2020/3/4": {
		"高知県": 4,
		"愛媛県": 1,
		"宮崎県": 1,
		"北海道": 4,
		"東京都": 4,
		"千葉県": 1,
		"愛知県": 6,
		"京都府": 2,
		"大阪府": 7,
		"総計": 30
	},
	"2020/3/5": {
		"滋賀県": 1,
		"京都府": 1,
		"神奈川県": 2,
		"埼玉県": 2,
		"東京都": 8,
		"和歌山県": 1,
		"愛知県": 9,
		"栃木県": 1,
		"総計": 25
	},
	"2020/3/6": {
		"北海道": 7,
		"東京都": 5,
		"千葉県": 2,
		"高知県": 2,
		"奈良県": 1,
		"長野県": 1,
		"山梨県": 1,
		"兵庫県": 4,
		"秋田県": 1,
		"埼玉県": 2,
		"神奈川県": 5,
		"京都府": 1,
		"愛知県": 10,
		"大阪府": 11,
		"総計": 53
	},
	"2020/3/7": {
		"新潟県": 1,
		"神奈川県": 3,
		"広島県": 1,
		"北海道": 8,
		"京都府": 1,
		"千葉県": 4,
		"福島県": 1,
		"東京都": 5,
		"群馬県": 1,
		"兵庫県": 2,
		"大阪府": 7,
		"山梨県": 1,
		"愛知県": 7,
		"総計": 42
	},
	"2020/3/8": {
		"北海道": 3,
		"高知県": 2,
		"兵庫県": 2,
		"埼玉県": 1,
		"愛知県": 11,
		"大阪府": 11,
		"総計": 30
	},
	"2020/3/9": {
		"奈良県": 1,
		"北海道": 7,
		"石川県": 1,
		"京都府": 1,
		"兵庫県": 2,
		"新潟県": 2,
		"愛知県": 5,
		"総計": 19
	},
	"2020/3/10": {
		"大阪府": 15,
		"埼玉県": 2,
		"静岡県": 1,
		"愛知県": 12,
		"三重県": 1,
		"兵庫県": 7,
		"千葉県": 1,
		"東京都": 2,
		"神奈川県": 1,
		"京都府": 1,
		"北海道": 3,
		"総計": 46
	},
	"2020/3/11": {
		"新潟県": 3,
		"埼玉県": 5,
		"千葉県": 2,
		"北海道": 7,
		"京都府": 2,
		"神奈川県": 2,
		"大阪府": 5,
		"奈良県": 1,
		"東京都": 6,
		"兵庫県": 11,
		"愛知県": 5,
		"総計": 49
	},
	"2020/3/12": {
		"兵庫県": 5,
		"千葉県": 2,
		"北海道": 10,
		"東京都": 2,
		"三重県": 2,
		"埼玉県": 6,
		"大阪府": 9,
		"京都府": 2,
		"愛知県": 7,
		"新潟県": 3,
		"静岡県": 1,
		"総計": 49
	},
	"2020/3/13": {
		"兵庫県": 11,
		"埼玉県": 3,
		"神奈川県": 3,
		"千葉県": 2,
		"群馬県": 2,
		"北海道": 8,
		"東京都": 2,
		"佐賀県": 1,
		"大阪府": 3,
		"愛知県": 3,
		"総計": 38
	},
	"2020/3/14": {
		"神奈川県": 3,
		"長野県": 1,
		"福島県": 1,
		"埼玉県": 6,
		"北海道": 6,
		"千葉県": 2,
		"群馬県": 2,
		"東京都": 9,
		"大阪府": 10,
		"兵庫県": 5,
		"愛知県": 6,
		"三重県": 1,
		"総計": 52
	},
	"2020/3/15": {
		"北海道": 6,
		"神奈川県": 5,
		"和歌山県": 1,
		"滋賀県": 1,
		"兵庫県": 2,
		"東京都": 3,
		"大阪府": 4,
		"総計": 22
	},
	"2020/3/16": {
		"北海道": 4,
		"大阪府": 2,
		"愛知県": 2,
		"滋賀県": 1,
		"群馬県": 1,
		"兵庫県": 3,
		"総計": 13
	},
	"2020/3/17": {
		"香川県": 1,
		"神奈川県": 1,
		"滋賀県": 1,
		"宮崎県": 2,
		"茨城県": 1,
		"兵庫県": 4,
		"埼玉県": 5,
		"愛知県": 2,
		"群馬県": 4,
		"京都府": 2,
		"大阪府": 3,
		"福岡県": 1,
		"東京都": 12,
		"総計": 39
	},
	"2020/3/18": {
		"愛媛県": 1,
		"岐阜県": 1,
		"神奈川県": 3,
		"北海道": 2,
		"千葉県": 2,
		"京都府": 1,
		"栃木県": 1,
		"茨城県": 1,
		"埼玉県": 1,
		"愛知県": 2,
		"福井県": 1,
		"大阪府": 5,
		"東京都": 9,
		"兵庫県": 5,
		"総計": 35
	},
	"2020/3/19": {
		"三重県": 1,
		"大分県": 2,
		"和歌山県": 1,
		"福岡県": 1,
		"千葉県": 3,
		"神奈川県": 5,
		"北海道": 3,
		"大阪府": 2,
		"埼玉県": 4,
		"愛知県": 4,
		"東京都": 7,
		"熊本県": 1,
		"茨城県": 1,
		"総計": 35
	},
	"2020/3/20": {
		"和歌山県": 1,
		"広島県": 1,
		"石川県": 1,
		"兵庫県": 7,
		"北海道": 1,
		"京都府": 1,
		"埼玉県": 2,
		"千葉県": 5,
		"大分県": 3,
		"神奈川県": 1,
		"東京都": 11,
		"群馬県": 1,
		"愛知県": 3,
		"大阪府": 4,
		"総計": 42
	},
	"2020/3/21": {
		"栃木県": 1,
		"新潟県": 1,
		"大分県": 5,
		"北海道": 1,
		"神奈川県": 3,
		"愛知県": 2,
		"千葉県": 1,
		"大阪府": 2,
		"兵庫県": 5,
		"埼玉県": 3,
		"京都府": 1,
		"東京都": 7,
		"総計": 32
	},
	"2020/3/22": {
		"広島県": 1,
		"神奈川県": 6,
		"大分県": 4,
		"北海道": 3,
		"千葉県": 2,
		"奈良県": 1,
		"埼玉県": 4,
		"山口県": 1,
		"愛知県": 2,
		"岡山県": 1,
		"東京都": 2,
		"大阪府": 5,
		"兵庫県": 2,
		"京都府": 1,
		"岐阜県": 2,
		"総計": 37
	},
	"2020/3/23": {
		"神奈川県": 1,
		"兵庫県": 2,
		"岐阜県": 3,
		"茨城県": 2,
		"大阪府": 3,
		"埼玉県": 1,
		"千葉県": 3,
		"滋賀県": 1,
		"愛知県": 2,
		"京都府": 1,
		"福岡県": 1,
		"青森県": 2,
		"東京都": 14,
		"総計": 36
	},
	"2020/3/24": {
		"沖縄県": 1,
		"大分県": 2,
		"新潟県": 1,
		"栃木県": 2,
		"北海道": 1,
		"千葉県": 1,
		"群馬県": 2,
		"岐阜県": 4,
		"東京都": 17,
		"福岡県": 3,
		"京都府": 2,
		"神奈川県": 5,
		"大阪府": 8,
		"愛知県": 3,
		"山梨県": 2,
		"埼玉県": 7,
		"長野県": 1,
		"兵庫県": 3,
		"総計": 65
	},
	"2020/3/25": {
		"北海道": 1,
		"東京都": 14,
		"愛知県": 3,
		"大阪府": 7,
		"兵庫県": 2,
		"神奈川県": 5,
		"埼玉県": 7,
		"千葉県": 1,
		"新潟県": 2,
		"京都府": 2,
		"大分県": 1,
		"群馬県": 2,
		"岐阜県": 3,
		"福岡県": 3,
		"栃木県": 2,
		"山梨県": 2,
		"沖縄県": 1,
		"長野県": 1,
		"総計": 59
	},
	"2020/3/26": {
		"東京都": 41,
		"北海道": 4,
		"愛知県": 5,
		"大阪府": 6,
		"神奈川県": 4,
		"千葉県": 5,
		"京都府": 4,
		"岐阜県": 1,
		"茨城県": 4,
		"青森県": 2,
		"福井県": 2,
		"山口県": 1,
		"総計": 80
	},
	"2020/3/27": {
		"東京都": 26,
		"北海道": 1,
		"愛知県": 3,
		"大阪府": 7,
		"神奈川県": 5,
		"埼玉県": 7,
		"千葉県": 3,
		"京都府": 2,
		"大分県": 1,
		"岐阜県": 2,
		"群馬県": 1,
		"福岡県": 2,
		"栃木県": 4,
		"熊本県": 1,
		"滋賀県": 1,
		"福井県": 2,
		"山口県": 1,
		"広島県": 1,
		"宮城県": 1,
		"総計": 72
	}
};
        </script>
        <script>
            const blank = {};
            const start = new Date(2020, 2, 1);
            const startTime = start.getTime();
            const now = new Date();
            now.setDate(now.getDate() - 1);
            for(;;){
                if(now.getTime() < start.getTime()){
                    break;
                }
                blank[`${start.getFullYear()}/${start.getMonth() + 1}/${start.getDate()}`] = 0;
                start.setDate(start.getDate() + 1);
            }

            const total = {
                count: {},
                rank: [],
            };
            const prefectures = {};
            for(const key in data){
                const year = Number(key.split('/')[0]);
                const month = Number(key.split('/')[1] - 1);
                const date = Number(key.split('/')[2]);
                if(new Date(year, month, date).getTime() < startTime){
                    continue;
                }

                for(const prefecture in data[key]){
                    if(!total.count[prefecture]){
                        total.count[prefecture] = 0;
                    }
                    total.count[prefecture] += data[key][prefecture];

                    if(!prefectures[prefecture]){
                        prefectures[prefecture] = JSON.parse(JSON.stringify(blank));
                    }
                    prefectures[prefecture][key] = data[key][prefecture];
                }
            }
            for(const key in total.count){
                total.rank.push({
                    prefecture: key,
                    count: total.count[key]
                });
            }
            total.rank.sort((a, b)=>{
                return b.count - a.count;
            });
        </script>
        <script>
            const menu = document.createElement('div');
            menu.className = 'menu';
            document.body.appendChild(menu);

            const root = document.createElement('div');
            root.className = 'prefectures';
            document.body.appendChild(root);

            total.rank.forEach((item)=>{
                const element = document.createElement('div');
                element.className = 'prefecture';
                root.appendChild(element);

                const link = document.createElement('a');
                link.setAttribute('href', `#${encodeURIComponent(item.prefecture)}`);
                link.innerHTML = item.prefecture;
                menu.appendChild(link);

                const title = document.createElement('h2');
                title.innerHTML = item.prefecture;
                title.setAttribute('id', encodeURIComponent(item.prefecture));
                element.appendChild(title);

                const canvas = document.createElement('canvas');
                element.appendChild(canvas);

                const data = prefectures[item.prefecture];
                const labels = [];
                const datasets = [];
                for(const key in data){
                    labels.push(key.slice(5));
                    datasets.push(data[key]);
                }
                if(labels.length > 7){
                    const rate = Math.round(labels.length / 7);
                    for(let i = 0; i < labels.length; i++){
                        if(i == 0){
                            continue;
                        }
                        if((labels.length - 1) == i){
                            continue;
                        }
                        if((i % rate) == 0){
                            continue;
                        }
                        labels[i] = '';
                    }
                }

                new Chart(canvas, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            data: datasets,
                            borderColor: 'rgba(255, 99, 132, 1)',
                            backgroundColor: 'rgba(255, 99, 132, 0.4)',
                        }],
                    },
                    options: {
                        legend: {
                            display: false,
                        },
                        scales: {
                            xAxes: [{
                                gridLines: {
                                    display: false
                                }
                            }]
                        }
                    },
                });
            });
        </script>
    </body>
</html>